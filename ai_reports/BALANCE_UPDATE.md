# 游戏数值平衡更新 v2.0

## 更新日期
2025-11-22

## 更新概述
本次更新对游戏的核心数值系统进行了全面的平衡性调整，旨在提供更加合理和流畅的游戏体验。

---

## 一、核心机制改进

### 1.1 人群需求系统重构 ⭐ 重要改进

**问题描述：**
- 旧机制：当玩家升级时代后，人群会立即对新时代的资源产生需求
- 问题：玩家可能还未解锁该资源的生产建筑/科技，导致无法满足的需求压力

**解决方案：**
- 新机制：人群需求现在基于**科技解锁**而非时代
- 只有当玩家研究了相关科技并能够生产该资源后，人群才会开始需求该资源
- 为所有高级资源添加了 `unlockTech` 属性

**具体实现：**
```javascript
// 资源配置示例
plank: { 
  unlockTech: 'tools',  // 需要研究"铜制工具"科技
  unlockEpoch: 1 
}
brick: { 
  unlockTech: 'pottery',  // 需要研究"陶器"科技
  unlockEpoch: 1 
}
```

**影响的资源：**
- 木板 (plank) → 需要科技：铜制工具
- 砖块 (brick) → 需要科技：陶器
- 铜矿 (copper) → 需要科技：铜脉勘探
- 工具 (tools) → 需要科技：青铜冶炼
- 莎草纸 (papyrus) → 需要科技：莎草培植
- 铁矿 (iron) → 需要科技：锻铁术
- 香料 (spice) → 需要科技：海图绘制
- 咖啡 (coffee) → 需要科技：咖啡栽培学
- 煤炭 (coal) → 需要科技：煤气化
- 钢材 (steel) → 需要科技：钢合金

---

## 二、资源产出与消耗平衡

### 2.1 资源基础价格调整

**调整目标：**
- 反映资源的稀缺性和加工难度
- 优化经济系统的价格梯度

| 资源 | 旧价格 | 新价格 | 变化 | 说明 |
|------|--------|--------|------|------|
| 粮食 | 1.0 | 1.2 | +20% | 基础资源，轻微提升价值 |
| 木材 | 2.0 | 2.5 | +25% | 建筑基础材料，提升重要性 |
| 石料 | 3.0 | 3.5 | +17% | 稀缺性调整 |
| 木板 | 4.0 | 5.0 | +25% | 加工品，价值提升 |
| 砖块 | 5.0 | 6.0 | +20% | 建筑核心材料 |
| 铜矿 | 6.0 | 7.0 | +17% | 青铜时代关键资源 |
| 工具 | 9.0 | 10.0 | +11% | 高级加工品 |
| 莎草纸 | 7.0 | 8.0 | +14% | 文化资源 |
| 铁矿 | 8.0 | 9.0 | +13% | 封建时代核心 |
| 香料 | 12.0 | 14.0 | +17% | 奢侈品，价值提升 |
| 咖啡 | 10.0 | 12.0 | +20% | 启蒙时代特色资源 |
| 煤炭 | 7.0 | 8.0 | +14% | 工业燃料 |
| 钢材 | 14.0 | 16.0 | +14% | 工业时代顶级材料 |

### 2.2 建筑产出优化

**农业建筑：**
- 农田：产出 3.00 → 3.50 (+17%)，成本 10木材 → 12木材
- 庄园：产出 10.00 → 12.00 (+20%)，成本优化（木材120→100，木板20→25）

**采集建筑：**
- 伐木场：产出 2.00 → 2.20 (+10%)，成本 15食物 → 18食物
- 采石场：产出 1.50 → 1.70 (+13%)，成本 50木材 → 55木材

**工业建筑：**
- 锯木厂：
  - 产出：0.50 → 0.55 木板 (+10%)
  - 消耗：0.90 → 0.80 木材 (-11%)
  - 效率提升：转化率从 55.6% → 68.8%
  
- 砖窑：
  - 产出：0.50 → 0.55 砖块 (+10%)
  - 消耗：0.80石料+0.30木材 → 0.70石料+0.25木材 (-12.5%)
  - 成本优化：150木材+100石料 → 140木材+90石料

- 青铜铸坊：
  - 产出：0.40 → 0.45 工具 (+12.5%)
  - 消耗：0.40铜+0.30木材 → 0.35铜+0.25木材 (-12.5%)
  - 成本优化：150木材+80石料+40铜 → 140木材+75石料+35铜

---

## 三、军事单位平衡

### 3.1 单位属性调整

**设计理念：**
- 提升所有单位的基础战斗力
- 增加招募和维护成本，使军事决策更具战略性
- 保持兵种克制关系不变

| 单位 | 属性变化 | 成本变化 |
|------|----------|----------|
| **民兵** | 攻击 5→6, 防御 3→4 | 招募：20食物+10木材 → 25食物+12木材<br>维护：0.3食物+0.1银币 → 0.35食物+0.12银币 |
| **长矛兵** | 攻击 10→12, 防御 8→9 | 招募：50食物+30木材+10铁 → 55食物+35木材+12铁<br>维护：0.5食物+0.3银币 → 0.55食物+0.35银币 |
| **弓箭手** | 攻击 12→14, 防御 5→6 | 招募：60食物+40木材+20银币 → 65食物+45木材+25银币<br>维护：0.6食物+0.4银币 → 0.65食物+0.45银币 |
| **骑士** | 攻击 25→28, 防御 18→20 | 招募：200食物+80铁+120银币 → 220食物+90铁+140银币<br>维护：1.5食物+1.2银币 → 1.6食物+1.3银币 |
| **坦克** | 攻击 60→65, 防御 40→45 | 招募：500食物+300铁+150工具+400银币+100科研 → 550食物+350铁+180工具+450银币+120科研<br>维护：2.0食物+2.5银币+0.5工具 → 2.2食物+2.8银币+0.6工具 |

### 3.2 战斗力提升幅度

- 早期单位（民兵、长矛兵）：+15-20% 战斗力
- 中期单位（弓箭手、骑士）：+12-15% 战斗力
- 后期单位（坦克）：+10-12% 战斗力
- 成本增加：平均 +10-15%

---

## 四、科技研发成本优化

### 4.1 调整原则
- 早期科技：适度提高成本，延缓科技爆发
- 中期科技：保持合理进度
- 后期科技：增加成本，体现研发难度

### 4.2 具体调整

**石器时代（Epoch 0）：**
| 科技 | 旧成本 | 新成本 | 变化 |
|------|--------|--------|------|
| 磨制石斧 | 40 | 50 | +25% |
| 打制燧石 | 60 | 70 | +17% |
| 畜牧业 | 70 | 80 | +14% |
| 陶器 | 90 | 100 | +11% |

**青铜时代（Epoch 1）：**
| 科技 | 旧成本 | 新成本 | 变化 |
|------|--------|--------|------|
| 铜制工具 | 220 | 250 | +14% |
| 铜脉勘探 | 240 | 280 | +17% |
| 青铜冶炼 | 280 | 320 | +14% |

**封建时代（Epoch 3）：**
| 科技 | 旧成本 | 新成本 | 变化 |
|------|--------|--------|------|
| 封建制度 | 900 | 1000 | +11% |
| 神学 | 950 | 1100 | +16% |
| 官僚制度 | 1000 | 1200 | +20% |

**工业时代（Epoch 6）：**
| 科技 | 旧成本 | 新成本 | 变化 |
|------|--------|--------|------|
| 工业化 | 5600 | 6000 | +7% |
| 蒸汽动力 | 5800 | 6400 | +10% |

---

## 五、时代升级要求调整

### 5.1 调整目标
- 延长每个时代的游戏时间
- 确保玩家有充足时间发展经济和科技
- 提升时代升级的成就感

### 5.2 具体调整

| 时代 | 要求变化 | 成本变化 |
|------|----------|----------|
| **青铜时代** | 科研 500→600<br>人口 20→25 | 食物 500→600<br>木材 300→350<br>石料 100→120<br>银币 50→60 |
| **古典时代** | 科研 1500→1800<br>人口 80→90<br>文化 200→250 | 食物 800→1000<br>木材 400→500<br>砖块 150→180<br>银币 200→250<br>工具 50→60 |
| **封建时代** | 科研 4000→4500<br>人口 150→170<br>文化 500→600 | 食物 1500→1800<br>木材 800→1000<br>砖块 400→500<br>铁矿 200→250<br>莎草纸 80→100<br>银币 250→300 |
| **探索时代** | 科研 7000→8000<br>人口 280→320<br>文化 1200→1400 | 食物 2200→2600<br>木板 600→700<br>砖块 500→600<br>铁矿 300→350<br>银币 350→400 |

---

## 六、阶层需求优化

### 6.1 调整原则
- 降低基础资源需求，减轻早期压力
- 优化高级资源需求，配合科技解锁机制
- 保持阶层间的差异性

### 6.2 具体调整

| 阶层 | 旧需求 | 新需求 | 变化 |
|------|--------|--------|------|
| **自耕农** | 食物 0.5<br>木材 0.05<br>石料 0.05 | 食物 0.45<br>木材 0.04<br>石料 0.04 | -10% 至 -20% |
| **工人** | 食物 0.6<br>工具 0.08 | 食物 0.55<br>工具 0.07 | -8% 至 -12% |
| **工匠** | 食物 0.6<br>工具 0.12<br>砖块 0.05 | 食物 0.55<br>工具 0.10<br>砖块 0.04 | -8% 至 -20% |
| **商人** | 食物 0.5<br>文化 0.2<br>工具 0.05 | 食物 0.45<br>文化 0.18<br>工具 0.04 | -10% 至 -20% |

---

## 七、预期影响

### 7.1 游戏节奏
- ✅ 早期发展更加平稳，资源压力适中
- ✅ 中期科技树探索更有深度
- ✅ 后期时代升级更具挑战性和成就感

### 7.2 经济系统
- ✅ 资源价格梯度更加合理
- ✅ 产业链效率提升，减少资源浪费
- ✅ 经济决策更具战略性

### 7.3 军事系统
- ✅ 军队维护成本增加，避免无脑暴兵
- ✅ 单位战斗力提升，战斗更有观赏性
- ✅ 军事投资回报更加平衡

### 7.4 科技系统
- ✅ 科技研发节奏更加合理
- ✅ 科技选择更具战略意义
- ✅ 科技与资源解锁深度绑定

### 7.5 人群需求系统 ⭐
- ✅ 避免了"时代升级陷阱"
- ✅ 玩家可以按照自己的节奏发展科技
- ✅ 资源需求压力更加可控和合理

---

## 八、建议游玩策略

### 8.1 早期（石器-青铜时代）
1. 优先发展农业和木材生产
2. 研究基础科技提升产出效率
3. 控制人口增长，避免资源短缺
4. 不要急于升级时代，先打好经济基础

### 8.2 中期（古典-封建时代）
1. 建立完整的产业链（原料→加工→成品）
2. 平衡科技研发与建筑建造
3. 注意阶层满意度，避免生产力下降
4. 根据需要研究资源解锁科技

### 8.3 后期（探索-工业时代）
1. 优化资源配置，提升整体效率
2. 发展高级产业（香料、咖啡、钢铁）
3. 维持强大军队保护经济发展
4. 追求科技树的完整性

---

## 九、已知问题与后续计划

### 9.1 待观察项
- [ ] 监控玩家反馈，评估数值是否需要微调
- [ ] 观察AI对手在新数值下的表现
- [ ] 收集不同游戏速度下的平衡性数据

### 9.2 未来优化方向
- [ ] 增加更多科技解锁的资源
- [ ] 优化建筑升级系统
- [ ] 添加更多阶层和职业
- [ ] 引入季节和天气系统影响产出

---

## 十、技术实现细节

### 10.1 代码修改位置
1. `src/config/gameConstants.js` - 资源价格和解锁科技配置
2. `src/config/buildings.js` - 建筑产出和成本
3. `src/config/militaryUnits.js` - 军事单位属性
4. `src/config/technologies.js` - 科技成本
5. `src/config/epochs.js` - 时代升级要求
6. `src/config/strata.js` - 阶层需求
7. `src/logic/simulation.js` - 需求检查逻辑

### 10.2 核心逻辑变更
```javascript
// 旧逻辑：基于时代检查
if (resourceInfo.unlockEpoch > epoch) {
  continue; // 跳过未解锁的资源
}

// 新逻辑：基于科技检查
if (resourceInfo.unlockTech) {
  if (!techsUnlocked.includes(resourceInfo.unlockTech)) {
    continue; // 跳过未研究科技的资源
  }
}
```

---

## 结语

本次数值平衡更新是对游戏核心系统的一次全面优化。我们希望通过这些调整，为玩家提供更加流畅、合理和有深度的游戏体验。

特别感谢所有提供反馈和建议的玩家！

**祝游戏愉快！** 🎮
