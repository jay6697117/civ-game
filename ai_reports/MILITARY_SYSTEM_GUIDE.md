# 军事系统 - 完整指南

## 📖 系统概述

军事系统是游戏的核心战略机制之一，允许玩家招募、训练和指挥各种兵种进行战斗。系统包含完整的兵种体系、克制关系、战斗计算和资源管理。

## 🎯 核心机制

### 1. 兵种体系

游戏包含**15种不同兵种**，分布在5个时代中：

#### 兵种分类
- **步兵 (Infantry)** 🗡️ - 基础战斗单位，防御力强
- **弓箭手 (Archer)** 🏹 - 远程攻击单位，克制步兵
- **骑兵 (Cavalry)** 🐎 - 高机动单位，克制弓箭手
- **攻城 (Siege)** 💣 - 重型火力，对建筑和密集部队有效

### 2. 时代化兵种解锁

#### 石器时代 (Epoch 0)
- **民兵** - 最基础的战斗单位
  - 攻击: 5 | 防御: 3 | 速度: 3
  - 成本: 粮食20, 木材10
  - 特点: 成本低廉，快速征召

- **投石兵** - 原始远程单位
  - 攻击: 6 | 防御: 2 | 速度: 3 | 射程: 3
  - 成本: 粮食30, 木材15, 石料5
  - 特点: 对轻甲单位有效

#### 青铜时代 (Epoch 1)
- **长矛兵** - 反骑兵专家
  - 攻击: 10 | 防御: 8 | 速度: 3
  - 成本: 粮食50, 木材30, 铁矿10
  - 克制: 骑兵 +80%

- **弓箭手** - 标准远程单位
  - 攻击: 12 | 防御: 5 | 速度: 4 | 射程: 4
  - 成本: 粮食60, 木材40, 黄金20
  - 克制: 步兵 +50%

- **轻骑兵** - 快速突击单位
  - 攻击: 15 | 防御: 6 | 速度: 8
  - 成本: 粮食100, 黄金50, 铁矿20
  - 克制: 弓箭手 +60%

#### 封建时代 (Epoch 2)
- **重装步兵** - 精锐防御单位
  - 攻击: 18 | 防御: 15 | 速度: 2
  - 成本: 粮食120, 铁矿50, 黄金60
  - 特点: 重甲，坚守

- **弩兵** - 穿甲远程单位
  - 攻击: 20 | 防御: 8 | 速度: 3 | 射程: 5
  - 成本: 粮食100, 木材60, 铁矿40, 黄金40
  - 克制: 步兵 +60%, 骑兵 +20%

- **骑士** - 重装精锐骑兵
  - 攻击: 25 | 防御: 18 | 速度: 6
  - 成本: 粮食200, 铁矿80, 黄金120
  - 克制: 弓箭手 +80%, 步兵 +30%

#### 工业时代 (Epoch 3)
- **火枪兵** - 火器步兵
  - 攻击: 30 | 防御: 12 | 速度: 3 | 射程: 3
  - 成本: 粮食150, 铁矿60, 工具20, 黄金80
  - 克制: 骑兵 +50%, 步兵 +30%

- **火炮** - 重型攻城武器
  - 攻击: 50 | 防御: 10 | 速度: 1 | 射程: 6
  - 成本: 粮食200, 铁矿150, 工具50, 黄金200
  - 克制: 步兵 +80%, 弓箭手 +80%

- **龙骑兵** - 火枪骑兵
  - 攻击: 35 | 防御: 15 | 速度: 7 | 射程: 2
  - 成本: 粮食250, 铁矿80, 工具30, 黄金150
  - 克制: 弓箭手 +70%, 步兵 +40%

#### 信息时代 (Epoch 4)
- **现代步兵** - 自动武器步兵
  - 攻击: 45 | 防御: 25 | 速度: 4 | 射程: 4
  - 成本: 粮食300, 铁矿100, 工具50, 黄金200, 科研50
  - 克制: 步兵 +40%, 弓箭手 +50%

- **坦克** - 装甲战车
  - 攻击: 60 | 防御: 40 | 速度: 5 | 射程: 3
  - 成本: 粮食500, 铁矿300, 工具150, 黄金400, 科研100
  - 克制: 步兵 +100%, 骑兵 +50%, 弓箭手 +80%

- **现代火炮** - 远程火力支援
  - 攻击: 80 | 防御: 15 | 速度: 2 | 射程: 8
  - 成本: 粮食400, 铁矿250, 工具100, 黄金350, 科研80
  - 克制: 步兵 +120%, 弓箭手 +100%, 攻城 +50%

## ⚔️ 兵种克制系统

### 克制链条
```
长矛兵 → 骑兵 → 弓箭手 → 步兵 → 长矛兵
```

### 详细克制关系

| 攻击方 | 克制对象 | 伤害加成 |
|--------|---------|---------|
| 长矛兵 | 骑兵 | +80% |
| 弓箭手 | 步兵 | +50% |
| 轻骑兵 | 弓箭手 | +60% |
| 重装步兵 | 骑兵 | +40% |
| 弩兵 | 步兵 | +60% |
| 弩兵 | 骑兵 | +20% |
| 骑士 | 弓箭手 | +80% |
| 骑士 | 步兵 | +30% |
| 火枪兵 | 骑兵 | +50% |
| 火枪兵 | 步兵 | +30% |
| 火炮 | 步兵 | +80% |
| 火炮 | 弓箭手 | +80% |
| 龙骑兵 | 弓箭手 | +70% |
| 龙骑兵 | 步兵 | +40% |
| 现代步兵 | 步兵 | +40% |
| 现代步兵 | 弓箭手 | +50% |
| 坦克 | 步兵 | +100% |
| 坦克 | 骑兵 | +50% |
| 坦克 | 弓箭手 | +80% |
| 现代火炮 | 步兵 | +120% |
| 现代火炮 | 弓箭手 | +100% |
| 现代火炮 | 攻城 | +50% |

### 科技压制
- 高时代兵种对低时代兵种有**每时代+10%**的压制效果
- 例如：工业时代火枪兵 vs 青铜时代长矛兵 = +20%战斗力

## 💰 军队管理

### 1. 招募限制

#### 行政力限制
- 每个兵种消耗一定的行政力
- 总行政消耗不能超过行政容量
- 行政力通过建造市政厅和官员增加

**兵种行政成本**:
- 民兵/投石兵: 1-1.5
- 长矛兵/弓箭手/轻骑兵: 2-3
- 重装步兵/弩兵/骑士: 3-5
- 火枪兵/龙骑兵: 4-6
- 火炮: 8
- 现代步兵: 5
- 坦克: 10
- 现代火炮: 12

#### 人口限制
- 军队人口不能超过总人口的**30%**
- 大部分兵种占用1人口
- 重型单位（火炮、坦克、现代火炮）占用3-4人口

### 2. 维护成本

每个兵种每秒消耗资源：

**示例**:
- 民兵: 粮食0.3, 黄金0.1
- 弓箭手: 粮食0.6, 黄金0.4
- 骑士: 粮食1.5, 黄金1.2
- 火枪兵: 粮食1.0, 黄金0.8, 工具0.1
- 坦克: 粮食2.0, 黄金2.5, 工具0.5

**重要**: 如果无法支付维护成本，军队不会自动解散，但会影响经济发展。

### 3. 训练时间

- 基础单位: 2-5秒
- 中级单位: 6-10秒
- 高级单位: 12-20秒

训练队列显示在军事面板中，可以同时训练多个单位。

## ⚔️ 战斗系统

### 战斗力计算

```
基础战斗力 = Σ[(攻击力 + 防御力) × 数量] × (1 + 时代差 × 0.1)
```

### 克制加成计算

```
克制加成 = 1 + Σ(克制系数 - 1) × 权重
权重 = (攻击方数量 × 防御方数量) / 100
```

### 战斗结果判定

1. **计算双方战斗力**
   - 基础战斗力
   - 应用克制加成
   - 防御方获得+20%地形优势
   - 应用军事buff（来自社会阶层）

2. **添加随机因素**
   - ±15%随机波动
   - 模拟战场不确定性

3. **判定胜负**
   - 战斗力占比 > 50% = 胜利
   - 战斗力优势 > 80% = 压倒性胜利

### 伤亡计算

**胜利方损失**:
```
损失率 = 10% + 敌方优势 × 30%
```

**失败方损失**:
```
损失率 = 30% + 敌方优势 × 50%
```

**压倒性胜利**:
- 胜利方损失减半
- 失败方损失增加50%

### 战利品计算

仅胜利方获得战利品：

```
掠夺倍率 = 压倒性胜利 ? 30% : 15%
```

**资源分配**:
- 粮食: 40%
- 木材: 20%
- 黄金: 30%
- 铁矿: 10%

## 🎮 游戏策略

### 早期策略 (石器-青铜时代)

1. **快速扩张**
   - 优先招募民兵保护资源
   - 投石兵用于骚扰敌方采集

2. **资源掠夺**
   - 利用轻骑兵快速掠夺邻国
   - 避免与军事强国正面冲突

3. **防御优先**
   - 长矛兵防御骑兵突袭
   - 弓箭手守卫关键资源点

### 中期策略 (封建时代)

1. **兵种组合**
   - 重装步兵 + 弩兵 = 坚固防线
   - 骑士 + 弓箭手 = 快速突击

2. **克制运用**
   - 侦察敌军配置
   - 针对性招募克制兵种

3. **经济平衡**
   - 控制军队规模在人口20%以内
   - 确保维护成本不超过收入50%

### 后期策略 (工业-信息时代)

1. **科技优势**
   - 优先升级时代获得科技压制
   - 现代单位对古代单位有压倒性优势

2. **重型单位**
   - 坦克作为主力突破
   - 火炮提供远程火力支援

3. **全面战争**
   - 维持大规模军队
   - 多线作战征服邻国

## 📊 军事面板使用

### 军队概览
- **总兵力**: 显示当前所有单位总数
- **行政消耗**: 当前/最大行政力
- **人口占用**: 当前/最大军队人口
- **训练中**: 训练队列中的单位数量
- **维护成本**: 每秒消耗的资源

### 当前部队
- 显示所有已招募的单位
- 查看单位属性和数量
- 点击 ➖ 按钮解散单位

### 训练队列
- 显示正在训练的单位
- 显示剩余训练时间
- 自动完成后加入部队

### 招募单位
- 按时代分组显示可招募单位
- 显示单位属性、成本和训练时间
- 显示克制关系和特殊能力
- 检查资源、行政力和人口限制

## 🌍 外交与战斗

### 发起攻击
1. 切换到**外交**标签页
2. 选择目标国家
3. 点击**进攻**按钮（需要有军队）
4. 系统自动生成敌军并模拟战斗
5. 查看战斗结果报告

### 战斗报告
- **战斗力对比**: 双方战斗力和优势百分比
- **克制效果**: 显示克制关系生效次数
- **伤亡统计**: 双方损失的单位详情
- **战利品**: 胜利方获得的资源
- **战斗日志**: 详细的战斗过程描述

### 敌军生成规则

**大明帝国** (军事专制):
- 大量步兵和骑兵
- 高时代单位
- 攻击性强

**威尼斯共和国** (商业共和):
- 雇佣兵，兵种平衡
- 中等时代单位
- 防御为主

**教皇国** (神权政治):
- 弓箭手和步兵
- 防御型配置
- 文化影响力

## 💡 高级技巧

### 1. 兵种配比

**平衡配置** (推荐):
- 40% 步兵（前排）
- 30% 弓箭手（后排输出）
- 20% 骑兵（侧翼突击）
- 10% 攻城（火力支援）

**快速突击**:
- 70% 骑兵
- 30% 龙骑兵/轻骑兵

**坚固防御**:
- 50% 重装步兵
- 30% 弩兵
- 20% 长矛兵

### 2. 克制运用

**侦察敌军**:
- 通过外交界面查看敌国类型
- 推测敌军配置
- 针对性招募克制兵种

**克制链利用**:
- 敌方多骑兵 → 招募长矛兵
- 敌方多步兵 → 招募弓箭手
- 敌方多弓箭手 → 招募骑兵

### 3. 经济管理

**军费控制**:
- 维护成本不超过黄金收入的70%
- 保留应急资源用于紧急招募
- 和平时期减少军队规模

**行政优化**:
- 建造市政厅增加行政容量
- 满足官员需求获得行政加成
- 避免行政力不足导致效率下降

### 4. 时机把握

**最佳进攻时机**:
- 刚升级时代，科技优势明显
- 敌国关系低，外交惩罚小
- 资源充足，能承受损失

**避免战斗时机**:
- 军队规模小于敌方50%
- 维护成本已超负荷
- 国内社会阶层不满

## 🎯 成就目标

- **初次胜利**: 赢得第一场战斗
- **完美胜利**: 零损失击败敌人
- **征服者**: 击败所有邻国
- **军事强国**: 维持100+兵力
- **克制大师**: 单场战斗克制生效5次以上
- **闪电战**: 用骑兵在10秒内完成战斗
- **钢铁洪流**: 拥有10辆坦克

## ⚠️ 常见问题

### Q: 为什么无法招募单位？
A: 检查以下条件：
1. 是否达到所需时代
2. 资源是否充足
3. 行政力是否足够
4. 军队人口是否达到上限（30%）

### Q: 如何减少维护成本？
A: 
1. 解散不需要的单位
2. 增加黄金收入（建造市场）
3. 满足资本家需求获得经济加成

### Q: 为什么战斗总是失败？
A:
1. 检查兵种克制关系
2. 升级时代获得科技优势
3. 增加军队数量
4. 满足军人需求获得军事加成

### Q: 如何快速训练军队？
A:
1. 建造多个兵营（增加军人岗位）
2. 同时招募多个单位
3. 优先招募训练时间短的单位

### Q: 敌军太强怎么办？
A:
1. 先通过贸易和进贡提升关系
2. 发展经济和科技
3. 招募克制敌军的兵种
4. 等待时机，避免正面冲突

## 📈 数据统计

### 兵种效率对比

**性价比最高** (成本/战斗力):
1. 民兵 (早期)
2. 长矛兵 (中期)
3. 火枪兵 (后期)

**战斗力最强**:
1. 现代火炮 (80攻击)
2. 坦克 (60攻击, 40防御)
3. 现代步兵 (45攻击, 25防御)

**机动性最高**:
1. 轻骑兵 (速度8)
2. 龙骑兵 (速度7)
3. 骑士 (速度6)

**射程最远**:
1. 现代火炮 (射程8)
2. 火炮 (射程6)
3. 弩兵 (射程5)

---

**提示**: 军事系统是动态的，需要根据敌方配置灵活调整策略。定期查看军事面板，优化兵种配置，确保军队战斗力最大化！

**记住**: 战争是政治的延续，但也是资源的消耗。在发动战争前，确保国内经济稳定，社会阶层满意，才能支撑长期的军事行动！
