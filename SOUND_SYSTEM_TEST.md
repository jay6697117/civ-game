# 🎵 音效系统测试指南

## 快速测试步骤

### 1. 启动游戏

```bash
npm run dev
```

### 2. 测试音效功能

#### 方法一：通过设置面板测试

1. 启动游戏后，点击右上角的"存档"按钮（三个点图标）
2. 在下拉菜单中选择"设置"
3. 在设置面板中找到"音效设置"部分
4. 点击音效开关，启用音效（会播放一个成功音效）
5. 调整音量滑块，测试不同音量
6. 点击测试按钮，试听不同音效：
   - 点击
   - 成功
   - 建造
   - 战斗

#### 方法二：通过游戏操作测试

1. **测试点击音效**
   - 点击暂停/继续按钮
   - 切换游戏速度（1x, 2x, 5x）
   - 应该听到清脆的点击音效

2. **测试建造音效**
   - 在"建设"标签页中建造一个建筑（如农田）
   - 应该听到建造音效

3. **测试研究音效**
   - 在"科技"标签页中研究一项科技
   - 应该听到研究音效（上升的音调）

4. **测试升级音效**
   - 当满足条件时，升级到下一个时代
   - 应该听到升级音效（欢快的音阶）

5. **测试战斗音效**
   - 在"军事"标签页中招募军队
   - 发起一次军事行动
   - 胜利时听到胜利音效，失败时听到战斗音效

### 3. 验证设置持久化

1. 在设置面板中调整音效设置（开关、音量）
2. 刷新页面
3. 重新打开设置面板
4. 确认设置已保存

## 音效说明

### 各音效的特点

- **点击音效** - 短促的"哔"声，频率 800Hz
- **成功音效** - 上升的三音符（C-E-G），愉悦感
- **错误音效** - 下降的两音符，警示感
- **金币音效** - 快速上升的音调，清脆
- **建造音效** - 低沉的方波，有建造感
- **研究音效** - 上升的四音符，科技感
- **战斗音效** - 低沉的锯齿波，紧张感
- **胜利音效** - 上升的四音符，胜利感
- **升级音效** - 上升的五音符，成就感
- **通知音效** - 短促的两音符，提醒感

## 常见问题

### Q: 听不到音效？

**A:** 检查以下几点：
1. 确认音效已在设置中启用
2. 确认音量不是 0
3. 确认浏览器没有静音
4. 某些浏览器需要用户先进行交互才能播放音频

### Q: 音效太大声或太小声？

**A:** 在设置面板中调整音量滑块（0-100%）

### Q: 想要关闭音效？

**A:** 在设置面板中关闭音效开关

### Q: 音效设置没有保存？

**A:** 检查浏览器是否允许 localStorage，某些隐私模式可能禁用

## 开发者测试

### 测试音效生成

在浏览器控制台中运行：

```javascript
import { generateSound, SOUND_TYPES } from './src/config/sounds.js';

// 测试点击音效
const clickSound = generateSound(SOUND_TYPES.CLICK);
clickSound();

// 测试成功音效
const successSound = generateSound(SOUND_TYPES.SUCCESS);
successSound();
```

### 测试 Hook

```javascript
import { useSound } from './src/hooks/useSound.js';

function TestComponent() {
  const { playSound, SOUND_TYPES, enabled, volume } = useSound();
  
  console.log('音效启用:', enabled);
  console.log('音量:', volume);
  
  // 播放测试音效
  playSound(SOUND_TYPES.CLICK);
}
```

## 性能测试

1. 打开浏览器开发者工具
2. 切换到 Performance 标签
3. 开始录制
4. 执行各种游戏操作（建造、研究、战斗等）
5. 停止录制
6. 检查音效播放是否影响性能（应该几乎没有影响）

## 浏览器兼容性测试

在以下浏览器中测试：

- [ ] Chrome/Edge (推荐)
- [ ] Firefox
- [ ] Safari
- [ ] Opera

## 反馈

如果发现任何问题或有改进建议，请记录：

1. 浏览器版本
2. 操作系统
3. 问题描述
4. 复现步骤
5. 期望行为

## 下一步

音效系统已经完成基础功能，可以考虑：

1. 添加更多游戏事件的音效
2. 优化音效的音质和音调
3. 添加背景音乐系统
4. 添加音效主题切换功能
